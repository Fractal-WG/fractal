syntax = "proto3";

import "buf/validate/validate.proto";
import "google/protobuf/wrappers.proto";

import "common.proto";

package fractalengine.rpc.v1;

option go_package = "pkg/rpc/protocol";

message CreateSellOfferResponse {
  string id = 1;
  string hash = 2 [(buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
}

message CreateBuyOfferResponse {
  string id = 1;
  string hash = 2 [(buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
}

message GetSellOffersRequest {
  google.protobuf.Int32Value limit = 1;
  google.protobuf.Int32Value page = 2;
  google.protobuf.StringValue mint_hash = 3 [(buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
  google.protobuf.StringValue offerer_address = 4 [(buf.validate.field).string.pattern = "^(?:[DAmn2])[1-9A-HJ-NP-Za-km-z]{25,34}$"];
}

message GetBuyOffersRequest {
  google.protobuf.Int32Value limit = 1;
  google.protobuf.Int32Value page = 2;
  google.protobuf.StringValue mint_hash = 3 [(buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
  google.protobuf.StringValue seller_address = 4 [(buf.validate.field).string.pattern = "^(?:[DAmn2])[1-9A-HJ-NP-Za-km-z]{25,34}$"];
}

message GetSellOffersResponse {
  repeated SellOfferWithMint offers = 1;
  int32 total = 2;
  int32 page = 3;
  int32 limit = 4;
}

message GetBuyOffersResponse {
  repeated BuyOfferWithMint offers = 1;
  int32 total = 2;
  int32 page = 3;
  int32 limit = 4;
}

message CreateSellOfferRequest {
  CreateSellOfferRequestPayload payload = 1;
  string public_key = 2 [(buf.validate.field).string.min_len = 1];
  string signature = 3 [(buf.validate.field).string.min_len = 1];
}

message CreateSellOfferRequestPayload {
  string offerer_address = 1 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^(?:[DAmn2])[1-9A-HJ-NP-Za-km-z]{25,34}$"];
  string mint_hash = 2 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
  int32 quantity = 3 [(buf.validate.field).int32.gt = 0];
  int32 price = 4 [(buf.validate.field).int32.gt = 0];
}

message CreateBuyOfferRequest {
  CreateBuyOfferRequestPayload payload = 1;
  string public_key = 2 [(buf.validate.field).string.min_len = 1];
  string signature = 3 [(buf.validate.field).string.min_len = 1];
}

message CreateBuyOfferRequestPayload {
  string offerer_address = 1 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^(?:[DAmn2])[1-9A-HJ-NP-Za-km-z]{25,34}$"];
  string seller_address = 2 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^(?:[DAmn2])[1-9A-HJ-NP-Za-km-z]{25,34}$"];
  string mint_hash = 3 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
  int32 quantity = 4 [(buf.validate.field).int32.gt = 0];
  int32 price = 5 [(buf.validate.field).int32.gt = 0];
}

message DeleteSellOfferRequest {
  DeleteSellOfferRequestPayload payload = 1;
  string public_key = 2 [(buf.validate.field).string.min_len = 1];
  string signature = 3 [(buf.validate.field).string.min_len = 1];
}

message DeleteSellOfferResponse {
  string value = 1;
}

message DeleteSellOfferRequestPayload {
  string offer_hash = 1 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
}

message DeleteBuyOfferRequest {
  DeleteBuyOfferRequestPayload payload = 1;
  string public_key = 2 [(buf.validate.field).string.min_len = 1];
  string signature = 3 [(buf.validate.field).string.min_len = 1];
}

message DeleteBuyOfferResponse {
  string value = 1;
}

message DeleteBuyOfferRequestPayload {
  string offer_hash = 1 [(buf.validate.field).string.min_len = 1, (buf.validate.field).string.pattern = "^[a-fA-F0-9]{64}$"];
}
